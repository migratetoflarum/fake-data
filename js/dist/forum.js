(()=>{var t={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return t.d(n,{a:n}),n},d:(o,n)=>{for(var a in n)t.o(n,a)&&!t.o(o,a)&&Object.defineProperty(o,a,{enumerable:!0,get:n[a]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o);const n=flarum.core.compat["forum/app"];var a=t.n(n);const r=flarum.core.compat["common/extend"],e=flarum.core.compat["common/components/Button"];var s=t.n(e);const u=flarum.core.compat["forum/utils/DiscussionControls"];var i=t.n(u);function l(t,o){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},l(t,o)}function c(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,l(t,o)}const d=flarum.core.compat["common/components/Modal"];var p=t.n(d);const f=flarum.core.compat["common/app"];var g=t.n(f);const v=flarum.core.compat["common/Component"];var b=t.n(v);const h=flarum.core.compat["common/components/Switch"];var y=t.n(h);const C=flarum.core.compat["common/helpers/icon"];var k=t.n(C),_="migratetoflarum-fake-data.lib.generator.",F=function(t){function o(){for(var o,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(o=t.call.apply(t,[this].concat(a))||this).bulk=!1,o.userCount=0,o.discussionCount=0,o.discussionTag="none",o.postCount=0,o.dateStart="",o.dateInterval="",o.dirty=!1,o.loading=!1,o.output=null,o}return c(o,t),o.prototype.view=function(){var t=this,o=this.loading||this.output;return[m(".Form-group",[y().component({state:this.bulk,onchange:function(o){t.bulk=o},disabled:o},g().translator.trans(_+"bulk-mode")),m(".helpText",g().translator.trans(_+"bulk-mode-description"))]),m(".Form-group",[m("label",g().translator.trans(_+"user-count")),m("input.FormControl",{type:"number",min:"0",value:this.userCount+"",oninput:function(o){t.userCount=parseInt(o.target.value),t.dirty=!0},disabled:o})]),this.attrs.discussion?null:[m(".Form-group",[m("label",g().translator.trans(_+"discussion-count")),m("input.FormControl",{type:"number",min:"0",value:this.discussionCount+"",oninput:function(o){t.discussionCount=parseInt(o.target.value),t.dirty=!0},disabled:o})]),flarum.extensions["flarum-tags"]?m(".Form-group",[m("label",g().translator.trans(_+"discussion-tags")),m("span.Select",[m("select.Select-input.FormControl",{onchange:function(o){t.discussionTag=o.target.value},value:this.discussionTag,disabled:o},[m("option",{value:"none"},g().translator.trans(_+"discussion-tags-none")),m("option",{value:"random"},g().translator.trans(_+"discussion-tags-random")),flarum.core.compat["tags/utils/sortTags"](g().store.all("tags")).map((function(t){var o=t.name(),n=[t.id()];if(t.isChild()){var a=t.parent();o=a.name()+" / "+o,n.push(a.id())}var r=n.sort().join(",");return m("option",{value:r},o)}))]),k()("fas fa-sort",{className:"Select-caret"})])]):null],m(".Form-group",[m("label",g().translator.trans(_+"post-count")),m("input.FormControl",{type:"number",min:"0",value:this.postCount+"",oninput:function(o){t.postCount=parseInt(o.target.value),t.dirty=!0},disabled:o})]),m(".Form-group.FakeData-Date",[m("label",g().translator.trans(_+"date")),m("input.FormControl",{type:"text",value:this.dateStart+"",oninput:function(o){t.dateStart=o.target.value,t.dirty=!0},disabled:o,placeholder:g().translator.trans(_+"date-start-placeholder")}),m("input.FormControl",{type:"text",value:this.dateInterval+"",oninput:function(o){t.dateInterval=o.target.value,t.dirty=!0},disabled:o,placeholder:g().translator.trans(_+"date-interval-placeholder")})]),m(".Form-group",[null===this.output?s().component({disabled:!this.dirty,loading:this.loading,className:"Button Button--primary",onclick:function(){t.loading=!0;var o={bulk:t.bulk,user_count:t.userCount,post_count:t.postCount,date_start:t.dateStart,date_interval:t.dateInterval};t.attrs.discussion?(o.discussion_count=0,o.discussion_ids=[t.attrs.discussion.id()]):(o.discussion_count=t.discussionCount,"random"===t.discussionTag?o.tag_ids="random":"none"!==t.discussionTag&&(o.tag_ids=t.discussionTag.split(","))),g().request({url:g().forum.attribute("apiUrl")+"/fake-data",method:"POST",body:o}).then((function(o){t.dirty=!1,t.loading=!1,t.output=o&&o.output||"<no output>",m.redraw()})).catch((function(o){throw t.loading=!1,m.redraw(),o}))}},g().translator.trans(_+"send")):[s().component({className:"Button",onclick:function(){t.userCount=0,t.discussionCount=0,t.discussionTag="none",t.postCount=0,t.output=null}},g().translator.trans(_+"reset")),this.attrs.discussion?[s().component({className:"Button Button--primary",onclick:function(){g().modal.close(),window.location.reload()}},g().translator.trans(_+"refresh"))]:null,m("pre",this.output)]])]},o}(b()),S=function(t){function o(){return t.apply(this,arguments)||this}c(o,t);var n=o.prototype;return n.className=function(){return"GenerateRepliesModal"},n.title=function(){return a().translator.trans("migratetoflarum-fake-data.forum.generator.title")},n.content=function(){return m(".Modal-body",F.component({discussion:this.attrs.discussion}))},o}(p());a().initializers.add("migratetoflarum-fake-data",(function(){(0,r.extend)(i(),"moderationControls",(function(t,o){a().forum.attribute("adminUrl")&&t.add("migratetoflarum-fake-data",s().component({icon:"fas fa-database",onclick:function(){a().modal.show(S,{discussion:o})}},a().translator.trans("migratetoflarum-fake-data.forum.link.generate-replies")))}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map